<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FOUR · Escape Ritual</title>
  <meta name="description" content="A four-track Taylor ritual threading Houdini ↔ keys ↔ castle: escape, reclaim, rebuild, reign." />
  <style>
    :root{
      --bg:#0b0b10; --fg:#e9e9f2; --muted:#a7a7b8; --edge:#1b1b26; --accent:#b9a2ff;
      --card:#12121a; --card2:#14141f; --ring:#2a2a3a; --new:#3ad1a1;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; background:
        radial-gradient(1200px 900px at 10% -10%, #17172a 0, transparent 55%),
        radial-gradient(1000px 800px at 110% 10%, #1a152e 0, transparent 60%),
        linear-gradient(180deg, #0a0a10, #0b0b10);
      color:var(--fg); font:400 16px/1.5 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
    }
    a{color:var(--accent); text-decoration:none}
    a:hover{text-decoration:underline}
    .wrap{max-width:980px; margin:40px auto; padding:24px}
    header{display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:20px}
    .brand{display:flex; align-items:center; gap:12px}
    .glyph{
      width:40px; height:40px; border-radius:10px;
      background:conic-gradient(from 210deg, #b9a2ff, #6fe7ff, #b9a2ff);
      filter:saturate(0.9) brightness(0.95); box-shadow:0 0 0 1px #ffffff10, 0 8px 24px #0006;
    }
    h1{font-size:20px; margin:0; letter-spacing:.4px}
    .nav{display:flex; gap:8px; flex-wrap:wrap; align-items:center}
    .btn{
      display:inline-block; padding:10px 14px; border-radius:10px; background:var(--card);
      border:1px solid var(--edge); color:var(--fg); text-decoration:none;
    }
    .btn:hover{border-color:#3a3a55}
    .badge-new{
      display:inline-flex; align-items:center; gap:6px;
      padding:6px 10px; border-radius:999px; border:1px solid var(--edge);
      background:linear-gradient(180deg, #0d1a15, #0b1612);
      color:#dff7ef; font-size:11px; letter-spacing:.3px;
      box-shadow:inset 0 0 0 1px #ffffff08;
    }
    .dot{width:8px; height:8px; border-radius:50%; background:var(--new); box-shadow:0 0 10px var(--new);}

    .hero{
      border:1px solid var(--edge); border-radius:16px; padding:18px 18px 10px 18px;
      background:linear-gradient(180deg, #141423aa, #10101a), radial-gradient(800px 600px at 80% -20%, #2a2259aa, transparent 60%);
      box-shadow:inset 0 0 0 1px #ffffff05, 0 20px 60px #0008; margin-bottom:18px;
    }
    .hero h2{margin:0 0 8px 0; font-size:16px; color:#dcdcf5}
    .hero p{margin:0 0 10px 0; color:var(--muted)}
    .grid{display:grid; grid-template-columns:repeat(2, minmax(0,1fr)); gap:14px}
    @media (max-width:760px){ .grid{grid-template-columns:1fr} }
    .card{
      background:linear-gradient(180deg, #12121a, #0f0f17);
      border:1px solid var(--edge); border-radius:14px; padding:14px;
      box-shadow:inset 0 0 0 1px #ffffff08, 0 8px 28px #0007;
    }
    .row{display:flex; align-items:center; gap:12px}
    .num{
      width:30px; height:30px; display:grid; place-items:center; border-radius:8px;
      background:linear-gradient(180deg, #1d1d2a, #161623); border:1px solid var(--ring); color:#cfcff6;
      font-weight:600; font-size:13px;
    }
    .title{font-weight:600}
    .note{color:var(--muted); font-size:13px; margin-top:6px}
    .play{margin-top:10px; display:flex; gap:8px; flex-wrap:wrap}
    .pill{
      padding:8px 12px; border-radius:999px; border:1px solid var(--edge); background:var(--card2);
      color:var(--fg); text-decoration:none; font-size:13px; cursor:pointer; user-select:none;
    }
    .pill:hover{border-color:#3a3a55}
    .yt{
      width:100%; aspect-ratio:16/9; border:1px solid var(--edge); border-radius:12px; margin-top:10px;
      background:#0c0c14; overflow:hidden
    }
    details.hint{margin-top:10px; border:1px dashed #2a2a3a; border-radius:10px; padding:8px 10px; background:#0f0f18}
    details.hint summary{cursor:pointer; color:#cfcff6; font-size:13px}
    details.hint div{color:var(--muted); font-size:13px; margin-top:6px}
    footer{
      margin-top:24px; display:flex; justify-content:space-between; align-items:center; gap:12px;
      color:var(--muted); flex-wrap:wrap
    }
    .tiny{font-size:12px}
    .mantra{font-style:italic; color:#dcdcf5}
    /* toast */
    .toast{
      position:fixed; left:50%; bottom:28px; transform:translateX(-50%) translateY(10px);
      background:linear-gradient(180deg,#111822,#0c1118); color:#e9f7ff; border:1px solid #223042;
      border-radius:10px; padding:10px 14px; font-size:13px; opacity:0; pointer-events:none;
      box-shadow:0 10px 30px #0008; transition:opacity .2s ease, transform .2s ease;
    }
    .toast.show{opacity:1; transform:translateX(-50%) translateY(0)}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="glyph" aria-hidden="true"></div>
        <h1>FOUR · Escape</h1>
      </div>
      <nav class="nav">
        <a class="btn" href="/four/">← Back to FOUR</a>
        <span class="badge-new" id="newBadge"><span class="dot" aria-hidden="true"></span> NEW</span>
      </nav>
    </header>

    <section class="hero" aria-labelledby="ritual">
      <h2 id="ritual">Houdini Thread · Keys → Castle</h2>
      <p>A four-song arc: <strong>escape</strong> → <strong>reclaim</strong> → <strong>rebuild</strong> → <strong>reign</strong>. Click to play in-page, or open on YouTube.</p>
    </section>

    <section class="grid" id="tracks">
      <!-- 1 -->
      <article class="card" data-id="3tmd-ClpJxA" data-url="https://www.youtube.com/watch?v=3tmd-ClpJxA">
        <div class="row">
          <div class="num">1</div>
          <div>
            <div class="title">Look What You Made Me Do</div>
            <div class="note">“I don’t like your kingdom keys.” — keys motif (loss → reclaim)</div>
          </div>
        </div>
        <div class="play">
          <a class="pill" data-action="play">▶ Play here</a>
          <a class="pill" href="https://www.youtube.com/watch?v=3tmd-ClpJxA" target="_blank" rel="noopener">↗ Open on YouTube</a>
        </div>
        <div class="yt" hidden></div>
        <details class="hint">
          <summary>hint</summary>
          <div>Step 1: name the lock. If a gate isn’t yours, don’t beg for it — build the door you can open.</div>
        </details>
      </article>

      <!-- 2 -->
      <article class="card" data-id="tCXGJQYZ9JA" data-url="https://www.youtube.com/watch?v=tCXGJQYZ9JA">
        <div class="row">
          <div class="num">2</div>
          <div>
            <div class="title">Call It What You Want</div>
            <div class="note">“My castle crumbled overnight.” — castle motif (fall → refuge)</div>
          </div>
        </div>
        <div class="play">
          <a class="pill" data-action="play">▶ Play here</a>
          <a class="pill" href="https://www.youtube.com/watch?v=tCXGJQYZ9JA" target="_blank" rel="noopener">↗ Open on YouTube</a>
        </div>
        <div class="yt" hidden></div>
        <details class="hint">
          <summary>hint</summary>
          <div>Step 2: accept the collapse. What falls may be the scaffolding you outgrew.</div>
        </details>
      </article>

      <!-- 3 -->
      <article class="card" data-id="wyK7YuwUWsU" data-url="https://www.youtube.com/watch?v=wyK7YuwUWsU">
        <div class="row">
          <div class="num">3</div>
          <div>
            <div class="title">New Romantics</div>
            <div class="note">“I could build a castle out of all the bricks they threw at me.” — rebuild</div>
          </div>
        </div>
        <div class="play">
          <a class="pill" data-action="play">▶ Play here</a>
          <a class="pill" href="https://www.youtube.com/watch?v=wyK7YuwUWsU" target="_blank" rel="noopener">↗ Open on YouTube</a>
        </div>
        <div class="yt" hidden></div>
        <details class="hint">
          <summary>hint</summary>
          <div>Step 3: stack the bricks. Reuse every throw as structure; mortar = honesty.</div>
        </details>
      </article>

      <!-- 4 -->
      <article class="card" data-id="nQmJ6R9xZ2o" data-url="https://www.youtube.com/watch?v=nQmJ6R9xZ2o">
        <div class="row">
          <div class="num">4</div>
          <div>
            <div class="title">Castles Crumbling (feat. Hayley Williams)</div>
            <div class="note">reckoning with the old keep — then choose what still reigns</div>
          </div>
        </div>
        <div class="play">
          <a class="pill" data-action="play">▶ Play here</a>
          <a class="pill" href="https://www.youtube.com/watch?v=nQmJ6R9xZ2o" target="_blank" rel="noopener">↗ Open on YouTube</a>
        </div>
        <div class="yt" hidden></div>
        <details class="hint">
          <summary>hint</summary>
          <div>Step 4: reign differently. Keep the crown only if it fits the work, not the wound.</div>
        </details>
      </article>
    </section>

    <footer>
      <div class="tiny mantra" id="escapeMantra">“We don’t run away — we remember the door. We choose wonder, we choose the key, and we walk through together.”</div>
      <div class="tiny" style="display:flex; align-items:center; gap:8px;">
        <a href="/four/#dear-john" style="color:#b9a2ff;text-decoration:none;">← one pass with John</a>
        <button class="pill" type="button" id="copyMantra">Copy mantra</button>
      </div>
    </footer>
  </div>

  <div class="toast" id="toast" role="status" aria-live="polite" aria-atomic="true">Copied</div>

  <script>
    (function(){
      // mark NEW as viewed immediately & hide the badge
      var BADGE_KEY = 'four.escape.badge.ts';
      localStorage.setItem(BADGE_KEY, String(Date.now()));
      var badge = document.getElementById('newBadge');
      if(badge){ badge.style.display = 'none'; }

      // click-to-play embeds
      var cards = document.querySelectorAll('.card');
      function mountIframe(card){
        var box = card.querySelector('.yt');
        if(!box || !box.hasAttribute('hidden')) return;
        var id = card.getAttribute('data-id');
        var iframe = document.createElement('iframe');
        iframe.setAttribute('allowfullscreen','');
        iframe.setAttribute('referrerpolicy','strict-origin-when-cross-origin');
        iframe.setAttribute('allow','autoplay; encrypted-media; picture-in-picture');
        iframe.src = 'https://www.youtube-nocookie.com/embed/' + id + '?rel=0&modestbranding=1&playsinline=1&autoplay=1';
        box.appendChild(iframe);
        box.removeAttribute('hidden');
      }
      document.addEventListener('click', function(e){
        var el = e.target;
        if(el && el.matches('[data-action="play"]')){
          var card = el.closest('.card');
          if(card) mountIframe(card);
        }
      }, {passive:true});

      // copy mantra
      var copyBtn = document.getElementById('copyMantra');
      var mantraEl = document.getElementById('escapeMantra');
      var toast = document.getElementById('toast');

      function showToast(text){
        if(!toast) return;
        toast.textContent = text || 'Copied';
        toast.classList.add('show');
        setTimeout(function(){ toast.classList.remove('show'); }, 1800);
      }

      function copyText(text){
        if(navigator.clipboard && navigator.clipboard.writeText){
          navigator.clipboard.writeText(text).then(function(){ showToast('Copied'); }, function(){ fallbackCopy(text); });
        } else {
          fallbackCopy(text);
        }
      }

      function fallbackCopy(text){
        var ta = document.createElement('textarea');
        ta.value = text;
        ta.setAttribute('readonly','');
        ta.style.position='fixed'; ta.style.top='-1000px'; ta.style.opacity='0';
        document.body.appendChild(ta);
        ta.select(); ta.setSelectionRange(0, ta.value.length);
        try{ document.execCommand('copy'); }catch(e){}
        document.body.removeChild(ta);
        showToast('Copied');
      }

      if(copyBtn && mantraEl){
        copyBtn.addEventListener('click', function(){ copyText(mantraEl.textContent.trim()); });
      }
    })();
  </script>
</body>
</html>
