<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>four.plnt.earth</title>
<style>
html,body{
  margin:0;
  padding:0;
  height:100%;
  background:#070709;
  color:#eaeaf6;
  font-family:'Helvetica Neue',sans-serif;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  overflow:hidden;
  transition:background 3s ease;
}
.top-line{
  position:absolute;
  top:2rem;
  font-size:0.9rem;
  letter-spacing:1px;
  opacity:0.4;
}
.lesson{
  text-align:center;
  margin-top:4rem;
  opacity:0.8;
  line-height:1.6;
}
.lesson h2{
  font-weight:400;
  margin:0;
  font-size:1rem;
  letter-spacing:1px;
}
.lesson p{
  margin:0.3rem 0 0;
  font-size:0.9rem;
  opacity:0.7;
}
button{
  background:rgba(255,255,255,0.08);
  border:1px solid rgba(255,255,255,0.2);
  color:#fff;
  padding:1rem 2.2rem;
  border-radius:40px;
  font-size:1rem;
  letter-spacing:1px;
  cursor:pointer;
  transition:background 0.3s,transform 0.2s;
  z-index:2;
  margin-top:3rem;
}
button:hover{background:rgba(255,255,255,0.2);transform:scale(1.05)}
.ritual{
  max-width:340px;
  text-align:left;
  font-size:0.9rem;
  line-height:1.6;
  opacity:0.55;
  margin-top:1.5rem;
}
.tone-label{
  position:absolute;
  bottom:2rem;
  font-size:0.9rem;
  opacity:0;
  transition:opacity 1s;
  letter-spacing:1px;
}
.fade{opacity:1;}
@keyframes pulse{
  0%{transform:scale(1);opacity:1;}
  100%{transform:scale(1.2);opacity:0;}
}
.circle{
  position:absolute;
  width:200vmax;
  height:200vmax;
  border-radius:50%;
  background:radial-gradient(circle,transparent 0%,transparent 40%,rgba(255,255,255,0.15) 100%);
  opacity:0;
  transform:scale(1);
  z-index:1;
  animation:pulse 5s ease-out forwards;
}
</style>
</head>
<body>

<div class="top-line">nothing to hold</div>

<div class="lesson" id="lesson">
  <!-- dynamic day info -->
</div>

<button id="learn">learn a tone</button>

<div class="ritual">
  <p>
  a one-minute ritual<br><br>
  ① close your eyes and breathe once<br>
  ② click “learn a tone” and listen without naming it<br>
  ③ let the color reach you, then fade<br>
  ④ notice where it touched — head, chest, stomach<br>
  ⑤ exhale once more, and let it go<br><br>
  repeat only if it feels light.
  </p>
</div>

<div class="tone-label" id="label"></div>

<script>
const lessons=[
  {freq:128,name:'care',color:'#bda4ff',question:'Where can I soften?'},
  {freq:160,name:'clarity',color:'#a9d9ff',question:'What’s true right now?'},
  {freq:432,name:'trust',color:'#d6ffd6',question:'What can I stop guarding?'},
  {freq:128,name:'care',color:'#bda4ff',question:'How do I rest?'},
  {freq:160,name:'clarity',color:'#a9d9ff',question:'What did I misunderstand?'},
  {freq:432,name:'trust',color:'#d6ffd6',question:'What feels whole?'}
];

let start=localStorage.getItem('four_start');
if(!start){
  start=Date.now();
  localStorage.setItem('four_start',start);
}
const dayIndex=Math.floor((Date.now()-start)/(1000*60*60*24))%6;
const today=lessons[dayIndex];

const lessonDiv=document.getElementById('lesson');
lessonDiv.innerHTML=`<h2>day ${dayIndex+1} — ${today.freq} Hz · ${today.name}</h2><p>${today.question}</p>`;

const btn=document.getElementById('learn');
const label=document.getElementById('label');
let ctx;

function playTone(freq){
  if(!ctx) ctx=new (window.AudioContext||window.webkitAudioContext)();
  const osc=ctx.createOscillator();
  const gain=ctx.createGain();
  osc.frequency.value=freq;
  gain.gain.setValueAtTime(0.1,ctx.currentTime);
  gain.gain.exponentialRampToValueAtTime(0.0001,ctx.currentTime+5);
  osc.connect(gain).connect(ctx.destination);
  osc.start();
  osc.stop(ctx.currentTime+5);
}

btn.onclick=()=>{
  playTone(today.freq);

  document.body.style.background=today.color;
  setTimeout(()=>{document.body.style.background='#070709';},5000);

  const aura=document.createElement('div');
  aura.className='circle';
  aura.style.background=`radial-gradient(circle, ${today.color}55 0%, transparent 70%)`;
  document.body.appendChild(aura);
  setTimeout(()=>aura.remove(),5000);

  label.textContent=`${today.name} — ${today.freq} Hz`;
  label.classList.add('fade');
  setTimeout(()=>{label.classList.remove('fade');label.textContent='';},5000);
};
</script>

</body>
</html>
