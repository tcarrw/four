<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>four.plnt.earth</title>
<style>
html,body{
  margin:0;
  padding:0;
  height:100%;
  background:#070709;
  color:#ecebf9;
  font-family:'Helvetica Neue',sans-serif;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  text-align:center;
  overflow-x:hidden;
  transition:background 3s ease;
}
.top-line{
  margin-top:2rem;
  font-size:0.9rem;
  letter-spacing:1px;
  opacity:0.45;
}
.reflection{
  margin:3rem 1rem 2rem;
  max-width:600px;
  line-height:1.7;
  font-size:1rem;
  opacity:0.9;
}
iframe{
  width:90%;
  max-width:560px;
  aspect-ratio:16/9;
  border:none;
  border-radius:12px;
  box-shadow:0 0 30px rgba(255,255,255,0.1);
}
button{
  background:rgba(255,255,255,0.08);
  border:1px solid rgba(255,255,255,0.2);
  color:#fff;
  padding:1rem 2.2rem;
  border-radius:40px;
  font-size:1rem;
  letter-spacing:1px;
  cursor:pointer;
  transition:background 0.3s,transform 0.2s;
  margin:2.5rem 0;
}
button:hover{background:rgba(255,255,255,0.2);transform:scale(1.05)}
.tone-label{
  position:fixed;
  bottom:2rem;
  font-size:0.9rem;
  opacity:0;
  transition:opacity 1s;
  letter-spacing:1px;
}
.fade{opacity:1;}
@keyframes pulse{
  0%{transform:scale(1);opacity:1;}
  100%{transform:scale(1.2);opacity:0;}
}
.circle{
  position:fixed;
  width:200vmax;
  height:200vmax;
  border-radius:50%;
  background:radial-gradient(circle,transparent 0%,transparent 40%,rgba(255,255,255,0.15) 100%);
  opacity:0;
  transform:scale(1);
  z-index:1;
  animation:pulse 5s ease-out forwards;
}
</style>
</head>
<body>

<div class="top-line">nothing to hold · we learn</div>

<div class="reflection" id="reflection"></div>

<div id="video"></div>

<button id="learn">learn a tone</button>
<div class="tone-label" id="label"></div>

<script>
const days=[
  {
    freq:128,color:'#bda4ff',tone:'care',
    reflection:'We learn that courage is not loud. It hums like land under our feet.',
    video:'https://www.youtube.com/embed/7lLigiVgJsE?si=HoOUp5ZWwSzRKB6g'
  },
  {
    freq:160,color:'#a9d9ff',tone:'clarity',
    reflection:'We learn that clarity dances when we stop trying to catch it.',
    video:'https://www.youtube.com/embed/UlFrV5GJA_4?si=6Z6xpht5zbic3A_3'
  },
  {
    freq:432,color:'#d6ffd6',tone:'trust',
    reflection:'We learn to trust what didn’t happen, to love the space that stayed.',
    video:'https://www.youtube.com/embed/KsZ6tROaVOQ?si=QzberIMa-jHV86sH'
  },
  {
    freq:128,color:'#bda4ff',tone:'care',
    reflection:'We learn that rhythm repeats until it becomes freedom.',
    video:'https://www.youtube.com/embed/2JgvVfOfoWI?si=_6lusjt2VxY2pqeB'
  },
  {
    freq:160,color:'#a9d9ff',tone:'clarity',
    reflection:'We learn that precision is kindness — edges polished by fire.',
    video:'https://www.youtube.com/embed/wIft-t-MQuE?si=QBy9egGmQ2V-9p1q'
  },
  {
    freq:432,color:'#d6ffd6',tone:'trust',
    reflection:'We learn that endings are just the sound of breath returning home.',
    video:'https://www.youtube.com/embed/EXLgZZE072g?si=0elLFnZehuWK4JIC'
  }
];

let start=localStorage.getItem('four_start');
if(!start){
  start=Date.now();
  localStorage.setItem('four_start',start);
}
const dayIndex=Math.floor((Date.now()-start)/(1000*60*60*24))%6;
const today=days[dayIndex];

// reflection text
document.getElementById('reflection').textContent=today.reflection;

// video player
document.getElementById('video').innerHTML=
`<iframe src="${today.video}" title="Taylor Swift Video" allow="autoplay; encrypted-media" allowfullscreen></iframe>`;

const btn=document.getElementById('learn');
const label=document.getElementById('label');
let ctx;

function playTone(freq){
  if(!ctx) ctx=new (window.AudioContext||window.webkitAudioContext)();
  const osc=ctx.createOscillator();
  const gain=ctx.createGain();
  osc.frequency.value=freq;
  gain.gain.setValueAtTime(0.1,ctx.currentTime);
  gain.gain.exponentialRampToValueAtTime(0.0001,ctx.currentTime+5);
  osc.connect(gain).connect(ctx.destination);
  osc.start();
  osc.stop(ctx.currentTime+5);
}

btn.onclick=()=>{
  playTone(today.freq);
  document.body.style.background=today.color;
  setTimeout(()=>{document.body.style.background='#070709';},5000);

  const aura=document.createElement('div');
  aura.className='circle';
  aura.style.background=`radial-gradient(circle, ${today.color}55 0%, transparent 70%)`;
  document.body.appendChild(aura);
  setTimeout(()=>aura.remove(),5000);

  label.textContent=`${today.tone} — ${today.freq} Hz`;
  label.classList.add('fade');
  setTimeout(()=>{label.classList.remove('fade');label.textContent='';},5000);
};
</script>

</body>
</html>

